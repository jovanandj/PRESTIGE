FROM docker.io/continuumio/miniconda3

# Set working directory
WORKDIR /app

ENV DGLBACKEND=pytorch

# Copy the Conda environment file
COPY tuning_graphs_and_embeddings.yml .

# Create Conda environment
RUN conda env create -n myenv -f tuning_graphs_and_embeddings.yml && \
    conda clean --all --yes && \
    rm -rf /opt/conda/pkgs/*

# Copy the rest of the application code
COPY *.py .

# Command to run your application
CMD conda run -n myenv python -u sequential_hyper_tuning.py
